GACNST:
	Inherits: ^Building
	Inherits@SHAPE: ^3x3Shape
	Inherits@bounty: ^GlobalBounty
	Building:
		Footprint: xxx xxx xxx
		BuildSounds: facbld1.aud
		Dimensions: 3,3
	Buildable:
		Queue: Building
		BuildPaletteOrder: 1000
		Prerequisites: ~disabled
		Description: Builds base structures.
	Health:
		HP: 150000
	Armor:
		Type: Wood
	RevealsShroud:
		Range: 5c0
		MaxHeightDelta: 1100
	Production:
		Produces: Building,Defense
		PauseOnCondition: empdisable
	Valued:
		Cost: 2500
	Tooltip:
		Name: Construction Yard
	CustomSellValue:
		Value: 2500
	BaseBuilding:
	Transforms:
		RequiresCondition: factundeploy
		PauseOnCondition: empdisable || being-demolished || build-incomplete
		IntoActor: mcv
		Offset: 1,1
		Facing: 384
		DeployCursor: undeploy
	TransformsIntoMobile:
		RequiresCondition: factundeploy
		Locomotor: tracked
		Voice: Move
		RequiresForceMove: true
	TransformsIntoRepairable:
		RequiresCondition: factundeploy
		RepairActors: gadept
		Voice: Move
		RequiresForceMove: true
	TransformsIntoEntersTunnels:
		RequiresCondition: factundeploy
		Voice: Move
		RequiresForceMove: true
	TransformsIntoPassenger:
		RequiresCondition: factundeploy
		CargoType: Vehicle
		Voice: Move
		RequiresForceMove: true
	TransformsIntoTransforms:
		RequiresCondition: factundeploy && build-incomplete
	GrantConditionOnPrerequisite@GLOBALFACTUNDEPLOY:
		Condition: factundeploy
		Prerequisites: global-factundeploy
	ProductionBar@Building:
		ProductionType: Building
	ProductionBar@Defense:
		ProductionType: Defense
	WithIdleOverlay@TOP:
		RequiresCondition: !build-incomplete
		Sequence: idle-top
		Palette: player-nobright
		IsPlayerPalette: True
	WithIdleOverlay@TOP-BRIGHT:
		RequiresCondition: !build-incomplete
		Sequence: idle-top-bright
		Palette: bright
	WithIdleOverlay@SIDE:
		RequiresCondition: !build-incomplete
		Sequence: idle-side
	WithIdleOverlay@FRONT:
		RequiresCondition: !build-incomplete
		Sequence: idle-front
		Palette: player-nobright
		IsPlayerPalette: True
	WithIdleOverlay@FRONT-BRIGHT:
		RequiresCondition: !build-incomplete
		Sequence: idle-front-bright
		Palette: bright
	WithMakeOverlay@MAKE-BRIGHT:
		Sequence: make-bright
		Palette: bright
	WithBuildingPlacedOverlay:
		RequiresCondition: !build-incomplete
	Power:
		Amount: 0
	ProvidesPrerequisite@any:
		Prerequisite: structures.any
	ProvidesPrerequisite@gdi:
		Factions: gdi
		Prerequisite: structures.gdi
	ProvidesPrerequisite@nod:
		Factions: nod
		Prerequisite: structures.nod
	IsometricSelectable:
		Height: 36

PROC:
	Inherits: ^Building
	Inherits@SHAPE: ^4x3FactoryWithBibShape
	Inherits@bounty: ^GlobalBounty
	Valued:
		Cost: 2000
	Tooltip:
		Name: Tiberium Refinery
	Building:
		Footprint: xxX+ xx++ xxX+
		Dimensions: 4,3
	Health:
		HP: 90000
	RevealsShroud:
		Range: 6c0
		MaxHeightDelta: 1100
	Refinery:
		DockAngle: 640
		DockOffset: 2,1
		DiscardExcessResources: true
	StoresResources:
		Capacity: 2000
	CustomSellValue:
		Value: 600
	FreeActor:
		Actor: HARV
		SpawnOffset: 2,1
		Facing: 640
	WithIdleOverlay@LIGHTS:
		RequiresCondition: !build-incomplete
		Sequence: idle-lights
		Palette: player-nobright
		IsPlayerPalette: True
	WithIdleOverlay@LIGHTS-BRIGHT:
		RequiresCondition: !build-incomplete
		Sequence: idle-lights-bright
		Palette: bright
	WithIdleOverlay@BIB:
		RequiresCondition: !build-incomplete
		Sequence: bib
	WithDockedOverlay@FLAME:
		RequiresCondition: !build-incomplete
		Sequence: flame
		Palette: effect
	WithDockingOverlay@UNLOAD:
		RequiresCondition: !build-incomplete
	Power:
		Amount: -30
	ProvidesPrerequisite@buildingname:
	RenderSprites:
		Image: proc.gdi
		FactionImages:
			gdi: proc.gdi
			nod: proc.nod
	GrantConditionOnPlayerResources:
		Condition: contains-tiberium
	Explodes:
		RequiresCondition: contains-tiberium
		Weapon: TiberiumExplosion
	WithResourceStoragePipsDecoration:
		Position: BottomLeft
		RequiresSelection: true
		Margin: 8, 2
		FullSequence: pip-green-building
		EmptySequence: pip-empty-building
		PipStride: 4, 2
		PipCount: 25
		Palette: pips

GASILO:
	Inherits: ^Building
	Inherits@SHAPE: ^2x2Shape
	Inherits@bounty: ^GlobalBounty
	Buildable:
		Queue: Defense
		BuildPaletteOrder: 60
		Prerequisites: proc, ~techlevel.low
		Description: Stores excess Tiberium.
	Valued:
		Cost: 150
	Tooltip:
		Name: Silo
	Building:
		Footprint: xx xx
		Dimensions: 2, 2
	-GivesBuildableArea:
	Health:
		HP: 30000
	Armor:
		Type: Wood
	RevealsShroud:
		Range: 4c0
		MaxHeightDelta: 1100
	RenderSprites:
		Image: gasilo.gdi
		FactionImages:
			gdi: gasilo.gdi
			nod: gasilo.nod
	WithResourceLevelOverlay@FILLSTAGE:
		RequiresCondition: !build-incomplete
		Sequence: stages
	WithSpriteBody:
		Sequence: idle-underlay
	WithIdleOverlay@LIGHTS-BRIGHT:
		RequiresCondition: !build-incomplete
		Sequence: idle-lights-bright
		Palette: bright
	StoresResources:
		Capacity: 1500
	Power:
		Amount: -10
	GrantConditionOnPlayerResources:
		Condition: contains-tiberium
	Explodes:
		RequiresCondition: contains-tiberium
		Weapon: TiberiumExplosion
	WithResourceStoragePipsDecoration:
		Position: BottomLeft
		RequiresSelection: true
		Margin: 8, 2
		FullSequence: pip-green-building
		EmptySequence: pip-empty-building
		PipStride: 4, 2
		PipCount: 12
		Palette: pips

ANYPOWER:
	AlwaysVisible:
	Interactable:
	Tooltip:
		Name: Any Power Generation

BARRACKS:
	AlwaysVisible:
	Interactable:
	Tooltip:
		Name: Infantry Production

FACTORY:
	AlwaysVisible:
	Interactable:
	Tooltip:
		Name: Vehicle Production

RADAR:
	AlwaysVisible:
	Interactable:
	Tooltip:
		Name: Radar

TECH:
	AlwaysVisible:
	Interactable:
	Tooltip:
		Name: Tech Center

^RefineryHP:
	Inherits@bounty: ^GlobalBounty
	Health:
		HP: 90000
	Valued:
		Cost: 2000
	CustomSellValue:
		Value: 600
	Tooltip:
		Name: Tiberium Refinery
	Power:
		Amount: -30
	StoresResources:
		Capacity: 2000
	WithResourceStoragePipsDecoration:
		Position: BottomLeft
		RequiresSelection: true
		Margin: 8, 2
		FullSequence: pip-green-building
		EmptySequence: pip-empty-building
		PipStride: 4, 2
		PipCount: 25
		Palette: pips
		ValidRelationships: Ally, Neutral, Enemy
	WithMakeAnimation:
		Condition: Building-Buildup

^NormalRefineryHitShape:
	HitShape:
		Type: Rectangle
			TopLeft: -1536, -2048
			BottomRight: 1536, 0
			LocalYaw: 128

^FlippedRefineryHitshape:
	HitShape:
		Type: Rectangle
			TopLeft: -1536, 0
			BottomRight: 1536, 2048
			LocalYaw: 128

^FlippedRefineryXHitshape:
	HitShape:
		Type: Rectangle
			TopLeft: 0, -1536
			BottomRight: 2048, 1536
			LocalYaw: 128

^FlippedRefineryYHitshape:
	HitShape:
		Type: Rectangle
			TopLeft: -2048, -1536
			BottomRight: 0, 1536
			LocalYaw: 128

^Refinery:
	Inherits: ^Building
	Inherits@1: ^RefineryHP
	#Inherits@2: ^AICashCheat
	Inherits@SHAPE: ^NormalRefineryHitShape
	Building:
		Footprint: xx++ xx++ xx++
		Dimensions: 4,3
	Refinery: #Refinery:
		DockAngle: 640
		DockOffset: 2,1
		DiscardExcessResources: false
	FreeActor:
		Actor: HARV
		SpawnOffset: 3,1
		Facing: 640
	WithIdleOverlay@REDLIGHTS:
		Sequence: idle-redlights
		RequiresCondition: !Building-Buildup
	WithIdleOverlay@BIB:
		Sequence: bib
		RequiresCondition: !Building-Buildup
	WithDockedOverlay@flame:
		Sequence: flame
		Palette: effect
		RequiresCondition: !Building-Buildup
	ProvidesPrerequisite@proc:
		Prerequisite: proc
	RenderSprites:
	RequiresBuildableArea:
		AreaTypes: building
	IsometricSelectable:
		DecorationHeight: 36
	ThrowsShrapnel@SMALL:
		Pieces: 1, 2
		Weapons: SmallDebris
	ThrowsShrapnel@LARGE:
		Pieces: 1, 2
		Weapons: LargeDebris

^FlippedRefinery:
	Inherits: ^Building
	Inherits@1: ^RefineryHP
	#Inherits@2: ^AICashCheat
	Inherits@SHAPE: ^FlippedRefineryHitshape
	Building:
		Footprint: ++xx ++xx ++xx
		Dimensions: 4,3
	Refinery: #Refinery:
		DockAngle: 128
		DockOffset: 1,1
		DiscardExcessResources: false
	FreeActor:
		Actor: HARV
		SpawnOffset: 0,1
		Facing: 128
	WithIdleOverlay@REDLIGHTS:
		Sequence: idle-redlights
		RequiresCondition: !Building-Buildup
	WithIdleOverlay@BIB:
		Sequence: bib
		RequiresCondition: !Building-Buildup
	WithDockedOverlay@flame:
		Sequence: flame
		Palette: effect
		RequiresCondition: !Building-Buildup
	ProvidesPrerequisite@proc:
		Prerequisite: proc
	RequiresBuildableArea:
		AreaTypes: building

^FlippedXRefinery:
	Inherits: ^Building
	Inherits@1: ^RefineryHP
	#Inherits@2: ^AICashCheat
	Inherits@SHAPE: ^FlippedRefineryXHitshape
	Building:
		Footprint: xxx xxx +++ +++
		Dimensions: 3,4
	Refinery: #Refinery:
		DockAngle: 384
		DockOffset: 1,2
		DiscardExcessResources: false
	FreeActor:
		Actor: HARV
		SpawnOffset: 1,3
		Facing: 384
	WithIdleOverlay@REDLIGHTS:
		Sequence: idle-redlights
		RequiresCondition: !Building-Buildup
	WithIdleOverlay@BIB:
		Sequence: bib
		RequiresCondition: !Building-Buildup
	WithDockedOverlay@flame:
		Sequence: flame
		Palette: effect
		RequiresCondition: !Building-Buildup
	ProvidesPrerequisite@proc:
		Prerequisite: proc
	RequiresBuildableArea:
		AreaTypes: building

^FlippedYRefinery:
	Inherits: ^Building
	Inherits@1: ^RefineryHP
	#Inherits@2: ^AICashCheat
	Inherits@SHAPE: ^FlippedRefineryYHitshape
	Building:
		Footprint: +++ +++ xxx xxx
		Dimensions: 3,4
	Refinery: #Refinery:
		DockAngle: 896
		DockOffset: 1,1
		DiscardExcessResources: false
	FreeActor:
		Actor: HARV
		SpawnOffset: 1,0
		Facing: 896
	WithIdleOverlay@REDLIGHTS:
		Sequence: idle-redlights
		RequiresCondition: !Building-Buildup
	WithIdleOverlay@BIB:
		Sequence: bib
		RequiresCondition: !Building-Buildup
	WithDockedOverlay@flame:
		Sequence: flame
		Palette: effect
		RequiresCondition: !Building-Buildup
	ProvidesPrerequisite@proc:
		Prerequisite: proc
	RequiresBuildableArea:
		AreaTypes: building
